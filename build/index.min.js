"use strict";var alexaSsml=require("alexa-ssml"),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),objectWithoutProperties=function(e,t){var s={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);return s},CardType={LinkAccount:"LinkAccount",Simple:"Simple",Standard:"Standard"},SpeechType={PlainText:"PlainText",SSML:"SSML"},Response=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];classCallCheck(this,e),this.state=t}return createClass(e,[{key:"ask",value:function(e,t){return this.say(e,t).shouldEndSession(!1)}},{key:"say",value:function(t,s){return new e(Object.assign({},this.state,{response:Object.assign({},this.state.response,{shouldEndSession:!0},outputSpeech(t,s))}))}},{key:"reprompt",value:function(t,s){return new e(Object.assign({},this.state,{response:Object.assign({},this.state.response,{reprompt:Object.assign({},outputSpeech(t,s))})}))}},{key:"card",value:function(t){var s=t.type,n=void 0===s?CardType.Simple:s,r=objectWithoutProperties(t,["type"]);return new e(Object.assign({},this.state,{response:Object.assign({},this.state.response,{card:Object.assign({},r,n&&{type:n})})}))}},{key:"attributes",value:function(t){return new e(Object.assign({},this.state,{sessionAttributes:Object.assign({},this.state.sessionAttributes,t)}))}},{key:"shouldEndSession",value:function(t){return new e(Object.assign({},this.state,{response:Object.assign({},this.state.response,{shouldEndSession:t})}))}},{key:"build",value:function(e){return Object.assign({version:"1.0"},this.state,{response:Object.assign({shouldEndSession:!0},this.state.response)},e||this.state.sessionAttributes?{sessionAttributes:Object.assign({},e,this.state.sessionAttributes)}:null)}}]),e}();Response.ask=function(){var e;return(e=new Response).ask.apply(e,arguments)},Response.say=function(){var e;return(e=new Response).say.apply(e,arguments)},Response.card=function(){var e;return(e=new Response).card.apply(e,arguments)},Response.reprompt=function(){var e;return(e=new Response).reprompt.apply(e,arguments)},Response.shouldEndSession=function(){var e;return(e=new Response).shouldEndSession.apply(e,arguments)},Response.build=function(e){return Object.keys(e).reduce(function(t,s){var n=e[s],r="string"==typeof n?n:n,o="string"==typeof n?void 0:n.type;switch(s){case"ask":return t.ask(r,o);case"say":return t.say(r,o);case"reprompt":return t.reprompt(r,o);case"card":return t.card(n);case"attributes":return t.attributes(n);case"shouldEndSession":return t.shouldEndSession(n)}},new Response)};var outputSpeech=function(e){var t=arguments.length<=1||void 0===arguments[1]?SpeechType.PlainText:arguments[1];if(t===SpeechType.SSML||"object"===("undefined"==typeof e?"undefined":_typeof(e))){var s="object"===("undefined"==typeof e?"undefined":_typeof(e))?alexaSsml.render(e):e;return{outputSpeech:{type:SpeechType.SSML,ssml:s}}}return{outputSpeech:{type:t,text:e}}},ask=Response.ask,say=Response.say,card=Response.card,reprompt=Response.reprompt,shouldEndSession=Response.shouldEndSession,build=Response.build;exports.CardType=CardType,exports.SpeechType=SpeechType,exports.default=Response,exports.ask=ask,exports.say=say,exports.card=card,exports.reprompt=reprompt,exports.shouldEndSession=shouldEndSession,exports.build=build;
